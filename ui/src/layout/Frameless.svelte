<script>
    import { darkMode, keyboardShortcut } from '../stores.js';
    $: {
        window.document.documentElement.style.backgroundColor = 'white';
        window.document.documentElement.style.filter = $darkMode ? `invert(1) hue-rotate(180deg) contrast(90%) sepia(8%) brightness(93%)` : '';
    };
</script>

<div class="w-full relative box-border subpixel-antialiased">

    <!-- main content -->
    <div class="flex flex-col grow px-2 h-screen">

        <button
            on:click={() => darkMode.update(s => !s)}
            class="self-end m-2 text-xs text-secondary"
        >
            {#if $darkMode}
                <svg fill="currentColor" class="w-[30px] h-[30px]" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"><g><path d="M22.892 24c-1.39 0-2.93-.25-4.25-.64 -2.84-.84-3.48-4-3.51-4.14v0c-.04-.17-.11-.23-.15-.23v0c-.05 0-.11.07-.125.21 -.03.14-.67 3.31-3.51 4.15 -2.55.75-5.899.97-7.366-.08 -2.21-1.57-2.53-3.56-2.67-4.41 -.02-.11-.03-.19-.05-.24 -.131-.47-.769-.84-.981-.93 -.19-.08-.31-.26-.31-.46v-2.51c0-.22.14-.42.349-.48 8.185-2.61 13.295-.44 14.139-.03h1.02c.84-.41 5.95-2.577 14.139.02 .2.06.34.25.34.47v2.5c0 .19-.12.37-.3.45 -.23.1-.86.47-.99.93 -.02.05-.03.13-.05.23 -.14.85-.47 2.84-2.67 4.41 -.71.5-1.85.71-3.12.71Zm-6.77-4.97c.01.04.56 2.7 2.8 3.36 2.61.77 5.47.8 6.503.07 1.86-1.33 2.14-3.03 2.26-3.76 .02-.16.04-.28.06-.35 .2-.72.85-1.189 1.24-1.42v-1.84c-8.154-2.48-13.085.04-13.135.07 -.08.03-.16.05-.24.05h-1.27c-.09 0-.17-.03-.24-.06 -.05-.03-4.98-2.55-13.135-.08v1.83c.39.22 1.03.7 1.242 1.41 .02.07.04.19.06.35 .12.72.399 2.433 2.262 3.75 1.03.73 3.88.7 6.5-.08 2.26-.67 2.798-3.34 2.8-3.37 .11-.71.63-1.04 1.09-1.04 .53 0 1.02.41 1.14 1.03v0Z"/><path d="M29.5 15.252c-.18 0-.35-.1-.44-.26l-5.907-10.63c-.16-.27-.44-.41-.76-.37 -.32.03-.56.24-.64.54l-.625 1.62c-.1.25-.39.38-.65.28 -.26-.1-.39-.39-.29-.65l.61-1.59c.18-.65.75-1.13 1.46-1.214 .71-.09 1.38.246 1.74.86l5.91 10.62c.13.24.04.54-.2.68 -.08.04-.17.06-.25.06Z"/><path d="M.5 15.252c-.09 0-.17-.02-.243-.07 -.25-.14-.33-.44-.2-.68L5.95 3.88c.36-.63 1.02-.97 1.74-.88 .71.08 1.28.56 1.47 1.25l.59 1.54c.1.25-.03.54-.29.64 -.26.09-.55-.03-.65-.29l-.62-1.59c-.11-.35-.34-.55-.66-.59 -.32-.04-.6.1-.76.37L.86 14.947c-.1.16-.27.25-.44.25Z"/><path d="M4.37 18.897c-.24 0-.45-.17-.49-.41 -.06-.3-.09-.65-.1-1.06 -.01-.87.63-1.61 1.49-1.73 .27-.05.52.15.56.42 .03.27-.16.52-.43.56 -.36.05-.63.36-.63.72 0 .33.02.62.07.86 .05.27-.13.53-.4.58 -.04 0-.07 0-.1 0Z"/><path d="M18.25 18.997c-.24 0-.45-.17-.49-.41 -.09-.42-.12-.83-.1-1.19 .04-.79.62-1.45 1.4-1.6 .27-.06.53.12.58.39 .05.27-.13.53-.4.58 -.33.06-.58.34-.6.67 -.02.27.01.6.07.92 .05.27-.13.53-.4.58 -.04 0-.07 0-.1 0Z"/></g></svg>
            {:else}
                <svg fill="currentColor" class="w-[30px] h-[30px]" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"><g><path d="M14.5 23C9.81 23 6 19.18 6 14.5 6 9.81 9.81 6 14.5 6c4.68 0 8.5 3.81 8.5 8.5 0 4.68-3.82 8.5-8.5 8.5Zm0-16C10.36 7 7 10.36 7 14.5c0 4.13 3.36 7.5 7.5 7.5 4.13 0 7.5-3.37 7.5-7.5 0-4.14-3.37-7.5-7.5-7.5Z"/><path d="M14.5 4.818c-.28 0-.5-.23-.5-.5V.49c0-.276.22-.5.5-.5 .27 0 .5.224.5.5v3.81c0 .27-.23.5-.5.5Z"/><path d="M14.5 29c-.28 0-.5-.23-.5-.5v-3.82c0-.28.22-.5.5-.5 .27 0 .5.22.5.5v3.81c0 .27-.23.5-.5.5Z"/><path d="M4.318 15H.49c-.276 0-.5-.23-.5-.5 0-.28.224-.5.5-.5h3.81c.27 0 .5.22.5.5 0 .27-.23.5-.5.5Z"/><path d="M28.5 15h-3.82c-.28 0-.5-.23-.5-.5 0-.28.22-.5.5-.5h3.81c.27 0 .5.22.5.5 0 .27-.23.5-.5.5Z"/><path d="M7.3 7.8c-.13 0-.26-.05-.36-.15l-2.7-2.7c-.2-.2-.2-.52 0-.71 .19-.2.51-.2.7 0l2.7 2.7c.19.19.19.51 0 .7 -.1.09-.23.14-.36.14Z"/><path d="M24.399 24.899c-.13 0-.26-.05-.36-.15l-2.7-2.7c-.2-.2-.2-.52 0-.71 .19-.2.51-.2.7 0l2.7 2.7c.19.19.19.51 0 .7 -.1.09-.23.14-.36.14Z"/><path d="M4.601 24.899c-.13 0-.26-.05-.36-.15 -.2-.2-.2-.52 0-.71l2.7-2.7c.19-.2.51-.2.7 0 .19.19.19.51 0 .7l-2.7 2.7c-.1.09-.23.14-.36.14Z"/><path d="M21.7 7.8c-.13 0-.26-.05-.36-.15 -.2-.2-.2-.52 0-.71l2.7-2.7c.19-.2.51-.2.7 0 .19.19.19.51 0 .7l-2.7 2.7c-.1.09-.23.14-.36.14Z"/></g></svg>
            {/if}
        </button>

        <slot name="main"></slot>

    </div>

</div>

{#if $keyboardShortcut === 'search'}
    <div class="fixed top-0 left-0 w-screen h-screen flex place-content-center place-items-center bg-white z-40">
        <div class="w-96">
            <div class="my-4">
                content
            </div>
        </div>
    </div>
{/if}

{#if $keyboardShortcut === 'help'}
    <div class="fixed top-0 left-0 w-screen h-screen flex place-content-center place-items-center bg-white z-40">
        <div class="w-96">
            <div class="my-4">
                <div class="grid grid-cols-4 gap-3">
                    <div class="font-mono w-full"><div class="p-2 bg-gray-200">?</div></div>
                    <div class="col-span-3"><div class="p-2 bg-gray-100">show this help text</div></div>
                    <div class="font-mono w-full"><div class="p-2 bg-gray-200">Esc</div></div>
                    <div class="col-span-3"><div class="p-2 bg-gray-100">close dialog overlay (such as this help text)</div></div>
                    <div class="font-mono w-full"><div class="p-2 bg-gray-200">/</div></div>
                    <div class="col-span-3"><div class="p-2 bg-gray-100">search</div></div>
                </div>
            </div>
        </div>
    </div>
{/if}
